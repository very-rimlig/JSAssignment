<!doctype html>
<html lang="sv">
<!-- I den h√§r html-filen ligger all funktion i javascript s√• den anv√§nder ingen extern js-fil --->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boklotteriet ‚Äî minspel</title>
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      max-width: 760px;
      margin: 36px auto;
      padding: 16px;
      line-height: 1.5;
      color: #222;
    }
    header { margin-bottom: 18px; }
    label { display: block; margin: 8px 0 4px; font-weight: 600; }
    input[type="text"], input[type="number"], select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }
    .row { display: flex; gap: 12px; align-items: center; }
    .row > * { flex: 1; }
    .controls { margin: 12px 0 18px; display:flex; gap:8px; }
    button {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid #333;
      background: #e6f2ff;
      cursor: pointer;
      font-weight: 600;
    }
    button.secondary { background: #f3f3f3; }
    #output {
      background: #fafafa;
      border: 1px solid #eee;
      padding: 12px;
      border-radius: 8px;
      min-height: 72px;
      white-space: pre-wrap;
    }
    .book {
      display: inline-block;
      margin-top: 8px;
      padding: 8px 12px;
      border-radius: 8px;
      background: #fffbe6;
      border: 1px dashed #f0c000;
      font-weight: 700;
    }
    footer { margin-top: 18px; font-size: .9rem; color: #666; }
  </style>
</head>
<body>
<header>
  <h1>Boklotteriet ‚Äî minspel</h1>
  <p>Fyll i profil, klicka p√• <strong>Spela</strong> och se vad lotteriet ger dig.</p>
</header>

<main>
  <label for="name">Namn</label>
  <input id="name" type="text" value="Olle" />

  <label for="age">√Ölder</label>
  <input id="age" type="number" min="0" value="40" />

  <label>K√∂n</label>
  <div class="row" aria-label="K√∂n">
    <label><input type="radio" name="gender" value="female" /> Kvinna</label>
    <label><input type="radio" name="gender" value="male" checked /> Man</label>
    <label><input type="radio" name="gender" value="other" /> Annat / Vill ej uppge</label>
  </div>

  <div class="controls">
    <button id="playBtn">Spela</button>
    <button id="clearBtn" class="secondary">Rensa</button>
  </div>

  <section>
    <h2>Resultat</h2>
    <div id="output" aria-live="polite"></div>
  </section>
</main>

<footer>
  <small>Skapat som ett litet √∂vningsspel ‚Äî inga riktiga k√∂p erbjuds üòä</small>
</footer>

<script>
  // --- Variabler / DOM ---
  const nameInput = document.getElementById("name");
  const ageInput = document.getElementById("age");
  const playBtn = document.getElementById("playBtn");
  const clearBtn = document.getElementById("clearBtn");
  const output = document.getElementById("output");

  // Boklista (samma som du hade)
  const books = [
    "Sagan om Sune",
    "Bajsboken",
    "Kvinnorummet",
    "Lagboken",
    "R√∂da rummet",
    "Familjen",
    "L√§r dig koda eller g√∂m dig",
    "Regler √§r till f√∂r att brytas",
    "P√• j√§rnv√§g genom ett regnigt N√§rke",
    "Kokboken"
  ];

  // Hj√§lpfunktion f√∂r att skriva ut till sidan (ist√§llet f√∂r console.log)
  function show(msg, append = true) {
    if (!append) output.textContent = "";
    // L√§gg till med radbrytning
    output.textContent = output.textContent + msg + "\n";
  }

  // --- Din ursprungliga logik, men uppdaterad f√∂r att anv√§nda show() ---
  function main(name, age, female, male) {
    // Rensa output f√∂r ny k√∂rning
    output.textContent = "";

    greeting(name);

    if (checkage(age)) {   // checkage returnerar true/false
      giveRandomBook();
      checkgender(female, male);
    }
  }

  // H√§lsning
  function greeting(name) {
    show("Hej " + name);
  }

  // √Ölderskontroll + specialmeddelande
  function checkage(age) {
    if (age < 20) {
      show("Du √§r tyv√§rr f√∂r ung f√∂r att spela Boklotteriet");
      return false; // <--- s√§ger till main att INTE forts√§tta
    } else {
      show("V√§lkommen in till boklotteriet");

      if (age > 30) {
        show("Du uppgraderas till superl√§sare!");
      }
      return true; // <--- s√§ger till main att forts√§tta
    }
  }

  // Slumpa en bok fr√•n listan
  function giveRandomBook() {
    let randomIndex = Math.floor(Math.random() * books.length);
    let chosenBook = books[randomIndex];

    // Visa extra tydligt
    show("\nLotteriet ger dig denna bok:");
    // skapa ett visuellt element i output f√∂r att lyfta fram boken
    const bookBadge = document.createElement("div");
    bookBadge.className = "book";
    bookBadge.textContent = chosenBook;

    // l√§gg in badge i output (eftersom show() jobbar med textContent, beh√∂ver vi appendChild)
    output.appendChild(bookBadge);
    show("", true); // l√§gga till radbrytning efter badgen
  }

  function checkgender(female, male) {
    if (female) {
      show("PS. Du f√•r k√∂pa m√•nadens kvinnobok 'Man up' f√∂r halva priset p√• Bladbutiken");
    } else if (male) {
      show("PS. Du f√•r k√∂pa m√•nadens mansbok 'Gr√•t mer' f√∂r halva priset p√• Bladbutiken");
    } else {
      show("PS. Du f√•r k√∂pa m√•nadens queer-bok f√∂r INGENTING!");
    }
  }

  // --- Koppla UI till funktionerna ---
  playBtn.addEventListener("click", () => {
    const name = nameInput.value.trim() || "Spelare";
    const age = Number(ageInput.value);
    const genderValue = document.querySelector('input[name="gender"]:checked')?.value || "other";

    // Konvertera till booleans som din main f√∂rv√§ntar sig
    const female = genderValue === "female";
    const male = genderValue === "male";

    // Validera √•lder-inmatning
    if (Number.isNaN(age) || age < 0) {
      output.textContent = "";
      show("Skriv in en giltig √•lder (0 eller h√∂gre).", false);
      return;
    }

    main(name, age, female, male);
  });

  clearBtn.addEventListener("click", () => {
    output.textContent = "";
  });

  // Valfritt: k√∂ra en demo vid sidladdning (kommentera bort om du inte vill detta)
  // main("Olle", 40, false, true);
</script>
</body>
</html>
